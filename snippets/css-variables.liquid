<style>

  {% assign main_font = settings.type_main_font %}
  {% assign heading_font = settings.type_heading_font %}
  {% assign accent_font = settings.type_accent_font %}

  {{ main_font | font_face }}
  {{ heading_font | font_face }}
  {{ accent_font | font_face }}

  {%- assign main_font_bold = main_font | font_modify: 'weight', 'bolder' -%}
  {%- assign main_font_italic = main_font | font_modify: 'style', 'italic' -%}
  {%- assign main_font_bold_italic = main_font_bold | font_modify: 'style', 'italic' -%}

  {% if main_font_bold %}
    {{ main_font_bold | font_face }}
  {% endif %}

  {% if main_font_italic %}
    {{ main_font_italic | font_face }}
  {% endif %}

  {% if main_font_bold_italic %}
    {{ main_font_bold_italic | font_face }}
  {% endif %}

  {% comment %}
    Font stacks and settings
  {% endcomment %}

  {% capture heading_font_stack %}{{ heading_font.family }}, {{ heading_font.fallback_families }}{% endcapture %}
  {% assign heading_font_weight = heading_font.weight %}
  {% assign heading_font_style = heading_font.style %}
  {% assign heading_text_transform = settings.heading_text_transform %}

  {% capture main_font_stack %}{{ main_font.family }}, {{ main_font.fallback_families }}{% endcapture %}
  {% assign main_font_weight = main_font.weight %}

  {% capture accent_font_stack %}{{ accent_font.family }}, {{ accent_font.fallback_families }}{% endcapture %}
  {% assign accent_font_weight = accent_font.weight %}
  {% assign accent_text_transform = settings.accent_text_transform %}

  {% assign header_navigation_text_transform = settings.header_navigation_text_transform %}

  {% comment %}
    Theme Settings > Products > Title and price text alignment: (left, center)
  {% endcomment %}
  {% assign list_and_grid_align = settings.list_and_grid_align %}

  {%- if settings.header_navigation_typeface == 'main' -%}
    {% capture header_navigation_typeface %}{{ main_font.family }}, {{ main_font.fallback_families }}{% endcapture %}
    {% assign header_navigation_font_weight = main_font.weight %}
  {%- else -%}
    {% capture header_navigation_typeface %}{{ accent_font.family }}, {{ accent_font.fallback_families }}{% endcapture %}
    {% assign header_navigation_font_weight = accent_font.weight %}
  {%- endif -%}

  {% capture icon_select_svg %}url({{ "ico-select.svg" | asset_url }}){% endcapture %}
  {% capture icon_select_svg_primary %}url({{ "ico-select__primary.svg" | asset_url }}){% endcapture %}
  {% capture icon_select_svg_secondary %}url({{ "ico-select__secondary.svg" | asset_url }}){% endcapture %}
  {% capture icon_select_svg_tertiary %}url({{ "ico-select__tertiary.svg" | asset_url }}){% endcapture %}

  {% capture modal_controls_preloader %}url({{ 'pswp-preloader.gif' | asset_url }}) 0 0 no-repeat{% endcapture %}

  /* Primary text overlay */
  {%- assign background = settings.color_primary_background  | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_primary_text  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign primary_overlay_color = '' -%}
  {%- if text > 127 -%}
    {%- if background > 127 -%}
      {%- assign primary_overlay_color = '#000000' -%}
    {%- else -%}
      {%- assign primary_overlay_color = settings.color_primary_background  -%}
    {%- endif -%}
  {%- else -%}
    {%- if background > 127 -%}
      {%- assign primary_overlay_color = settings.color_primary_background  -%}
    {%- else -%}
      {%- assign primary_overlay_color = '#ffffff' -%}
    {%- endif -%}
  {%- endif -%}

  /* Primary text accent overlay */
  {%- assign background = settings.color_primary_background  | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_primary_accent  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign primary_accent_overlay_color = '' -%}
  {%- if text > 127 -%}
    {%- if background > 127 -%}
      {%- assign primary_accent_overlay_color = '#000000' -%}
    {%- else -%}
      {%- assign primary_accent_overlay_color = settings.color_primary_background  -%}
    {%- endif -%}
  {%- else -%}
    {%- if background > 127 -%}
      {%- assign primary_accent_overlay_color = settings.color_primary_background  -%}
    {%- else -%}
      {%- assign primary_accent_overlay_color = '#ffffff' -%}
    {%- endif -%}
  {%- endif -%}

  /* Secondary text overlay */
  {%- assign background = settings.color_secondary_background  | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_secondary_text  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign secondary_overlay_color = '' -%}
  {%- if text > 127 -%}
    {%- if background > 127 -%}
      {%- assign secondary_overlay_color = '#000000' -%}
    {%- else -%}
      {%- assign secondary_overlay_color = settings.color_secondary_background  -%}
    {%- endif -%}
  {%- else -%}
    {%- if background > 127 -%}
      {%- assign secondary_overlay_color = settings.color_secondary_background  -%}
    {%- else -%}
      {%- assign secondary_overlay_color = '#ffffff' -%}
    {%- endif -%}
  {%- endif -%}

  {%- assign background = settings.color_secondary_background  | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_secondary_accent  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign secondary_accent_overlay = '' -%}
  {%- if text > 127 -%}
    {%- if background > 127 -%}
      {%- assign secondary_accent_overlay = '#000000' -%}
    {%- else -%}
      {%- assign secondary_accent_overlay = settings.color_secondary_background  -%}
    {%- endif -%}
  {%- else -%}
    {%- if background > 127 -%}
      {%- assign secondary_accent_overlay = settings.color_secondary_background  -%}
    {%- else -%}
      {%- assign secondary_accent_overlay = '#ffffff' -%}
    {%- endif -%}
  {%- endif -%}

  {%- assign background = settings.color_tertiary_background  | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_tertiary_text  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign tertiary_overlay_color = '' -%}
  {%- if text > 127 -%}
    {%- if background > 127 -%}
      {%- assign tertiary_overlay_color = '#000000' -%}
    {%- else -%}
      {%- assign tertiary_overlay_color = settings.color_tertiary_background  -%}
    {%- endif -%}
  {%- else -%}
    {%- if background > 127 -%}
      {%- assign tertiary_overlay_color = settings.color_tertiary_background  -%}
    {%- else -%}
      {%- assign tertiary_overlay_color = '#ffffff' -%}
    {%- endif -%}
  {%- endif -%}

  {%- assign background = settings.color_tertiary_background  | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_tertiary_accent  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign tertiary_accent_overlay = '' -%}
  {%- if text > 127 -%}
    {%- if background > 127 -%}
      {%- assign tertiary_accent_overlay = '#000000' -%}
    {%- else -%}
      {%- assign tertiary_accent_overlay = settings.color_tertiary_background  -%}
    {%- endif -%}
  {%- else -%}
    {%- if background > 127 -%}
      {%- assign tertiary_accent_overlay = settings.color_tertiary_background  -%}
    {%- else -%}
      {%- assign tertiary_accent_overlay = '#ffffff' -%}
    {%- endif -%}
  {%- endif -%}

  /* White text  overlay */
  {%- assign background = '#ffffff' | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_primary_text  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign white_text_overlay_color = '' -%}
  {%- if text > 127 -%}
    {%- assign white_text_overlay_color = settings.color_primary_background  -%}
  {%- else -%}
    {%- assign white_text_overlay_color = settings.color_primary_text  -%}
  {%- endif -%}

   /* Black text accent overlay */
  {%- assign background = '#000000' | color_brightness -%}
  {%- assign background = background | plus: 0 -%}
  {%- assign text = settings.color_primary_text  | color_brightness -%}
  {%- assign text = text | plus: 0 -%}
  {%- assign black_text_overlay_color = '' -%}
  {%- if text > 127 -%}
    {%- assign black_text_overlay_color = settings.color_primary_text -%}
  {%- else -%}
    {%- assign black_text_overlay_color = settings.color_primary_background  -%}
  {%- endif -%}

  {% if settings.active_header_color_scheme == 'secondary' %}
    {% assign color_active_text = settings.color_secondary_text %}
    {% assign color_active_background = settings.color_secondary_background %}
    {% assign color_active_accent = settings.color_secondary_accent %}
    {% assign color_active_meta = settings.color_secondary_meta %}
    {% assign color_active_text--overlay = secondary_overlay_color %}
    {% assign color_active_accent--overlay = secondary_accent_overlay %}
    {% assign color_active_text__faded = settings.color_secondary_text | color_modify: 'alpha', 0.9 %}
    {% assign color_active_background--faded = settings.color_secondary_background | color_modify: 'alpha', 0.9 %}
  {% else %}
    {% assign color_active_text = settings.color_tertiary_text %}
    {% assign color_active_background = settings.color_tertiary_background %}
    {% assign color_active_accent = settings.color_tertiary_accent %}
    {% assign color_active_meta = settings.color_tertiary_meta %}
    {% assign color_active_text__overlay = tertiary_overlay_color %}
    {% assign color_active_accent__overlay = tertiary_accent_overlay %}
    {% assign color_active_text__faded = settings.color_tertiary_text | color_modify: 'alpha', 0.9 %}
    {% assign color_active_background__faded = settings.color_tertiary_background | color_modify: 'alpha', 0.9 %}
  {% endif %}

  {%- assign primary_brightness = settings.color_primary_background  | color_brightness | plus: 0  -%}
  {%- assign secondary_brightness = settings.color_secondary_background  | color_brightness | plus: 0 -%}
  {%- assign tertiary_brightness = settings.color_tertiary_background  | color_brightness | plus: 0  -%}

  {%- if primary_brightness > 127 -%}
    {%- assign primary_placeholder_bg = 'rgba(0, 0, 0, 0.1)' -%}
  {% else %}
    {%- assign primary_placeholder_bg = 'rgba(255, 255, 255, 0.1)' -%}
  {% endif %}

  {%- if secondary_brightness > 127 -%}
    {%- assign secondary_placeholder_bg = 'rgba(0, 0, 0, 0.1)' -%}
  {% else %}
    {%- assign secondary_placeholder_bg = 'rgba(255, 255, 255, 0.1)' -%}
  {% endif %}

  {%- if tertiary_brightness > 127 -%}
    {%- assign tertiary_placeholder_bg = 'rgba(0, 0, 0, 0.1)' -%}
  {% else %}
    {%- assign tertiary_placeholder_bg = 'rgba(255, 255, 255, 0.1)' -%}
  {% endif %}


  :root {

    /* Fonts */

    --heading-font-stack: {{ heading_font_stack }};
    --heading-font-weight: {{ heading_font_weight }};
    --heading-font-style: {{ heading_font_style }};
    --heading-text-transform: {{ heading_text_transform }};

    --main-font-stack: {{ main_font_stack }};
    --main-font-weight: {{ main_font_weight }};

    --accent-font-stack: {{ accent_font_stack }};
    --accent-font-weight: {{ accent_font_weight }};
    --accent-text-transform: {{ accent_text_transform }};

    --header-navigation-text-transform: {{ header_navigation_text_transform }};
    --list-and-grid-align: {{ list_and_grid_align }};

    --header-navigation-typeface: {{ header_navigation_typeface }};
    --header-navigation-font-weight: {{ header_navigation_font_weight }};

    /*
    Primary color scheme
    */
    --color-primary-accent: {{ settings.color_primary_accent| color_to_rgb  }};
    --color-primary-text: {{ settings.color_primary_text| color_to_rgb  }};
    --color-primary-background: {{ settings.color_primary_background | color_to_rgb  }};
    --color-primary-meta: {{ settings.color_primary_meta | color_to_rgb  }};
    --color-primary-text--overlay: {{ primary_overlay_color | color_to_rgb  }};
    --color-primary-accent--overlay: {{ primary_accent_overlay_color | color_to_rgb  }};

    --color-primary-text--faded: {{ settings.color_primary_text | color_modify: 'alpha', 0.6 }};

    --color-primary-text--05: {{ settings.color_primary_text | color_modify: 'alpha', 0.05 }};

    --color-primary-background--1: {{ settings.color_primary_background | color_to_rgb }};
    --color-primary-background--02: {{ settings.color_primary_background | color_modify: 'alpha', 0.2 }};
    --color-primary-background--0: {{ settings.color_primary_background | color_modify: 'alpha', 0 }};




    /*
    Secondary color scheme
    */
    --color-secondary-accent: {{ settings.color_secondary_accent | color_to_rgb  }};
    --color-secondary-text: {{ settings.color_secondary_text | color_to_rgb  }};
    --color-secondary-background: {{ settings.color_secondary_background | color_to_rgb  }};
    --color-secondary-meta: {{ settings.color_secondary_meta | color_to_rgb  }};
    --color-secondary-text--overlay: {{ secondary_overlay_color | color_to_rgb  }};
    --color-secondary-accent--overlay: {{ secondary_accent_overlay| color_to_rgb  }};
    --color-secondary-text--faded: {{ settings.color_secondary_text | color_modify: 'alpha', 0.6 }};
    --color-secondary-background--faded: {{ settings.color_secondary_background | color_modify: 'alpha', 0.9 }};

    --color-secondary-text--05: {{ settings.color_secondary_text | color_modify: 'alpha', 0.05 }};

    --color-secondary-background--1: {{ settings.color_secondary_background |  color_to_rgb }};
    --color-secondary-background--02: {{ settings.color_secondary_background | color_modify: 'alpha', 0.2 }};
    --color-secondary-background--0: {{ settings.color_secondary_background | color_modify: 'alpha', 0 }};

    /*
    Tertiary color scheme
    */
    --color-tertiary-accent: {{ settings.color_tertiary_accent| color_to_rgb  }};
    --color-tertiary-text: {{ settings.color_tertiary_text| color_to_rgb  }};
    --color-tertiary-background: {{ settings.color_tertiary_background| color_to_rgb  }};
    --color-tertiary-meta: {{ settings.color_tertiary_meta| color_to_rgb  }};

    --color-tertiary-text--overlay: {{ tertiary_overlay_color| color_to_rgb  }};
    --color-tertiary-accent--overlay: {{ tertiary_accent_overlay| color_to_rgb  }};
    --color-tertiary-text--faded: {{ settings.color_tertiary_text | color_modify: 'alpha', 0.6 }};
    --color-tertiary-background--faded: {{ settings.color_tertiary_background | color_modify: 'alpha', 0.9 }};

    --color-tertiary-text--05: {{ settings.color_tertiary_text | color_modify: 'alpha', 0.05 }};

    --color-tertiary-background--1: {{ settings.color_tertiary_background | color_to_rgb }};
    --color-tertiary-background--02: {{ settings.color_tertiary_background| color_modify: 'alpha', 0.2 }};
    --color-tertiary-background--0: {{ settings.color_tertiary_background | color_modify: 'alpha', 0 }};

    --white-text--overlay: {{ white_text_overlay_color | color_to_rgb  }};
    --black-text--overlay: {{ black_text_overlay_color | color_to_rgb  }};
  
    /*
    Active text
    */
    --color-active-text: {{ color_active_text }};
    --color-active-background: {{ color_active_background }};
    --color-active-accent: {{ color_active_accent }};
    --color-active-meta: {{ color_active_meta }};
    --color-active-text--overlay: {{ color_active_text__overlay }};
    --color-active-text--faded: {{ color_active_text__faded }};
    --color-active-accent--overlay: {{ color_active_accent__overlay }};
    --color-active-background--faded: {{ color_active_background__faded }};

    /* placeholder */
    --primary-placeholder-bg: {{ primary_placeholder_bg }};
    --secondary-placeholder-bg: {{ secondary_placeholder_bg }};
    --tertiary-placeholder-bg: {{ tertiary_placeholder_bg }};


    /*
    SVG ico select
    */
    --icon-svg-select: {{ icon_select_svg }};
    --icon-svg-select-primary: {{ icon_select_svg_primary }};
    --icon-svg-select-secondary: {{ icon_select_svg_secondary }};
    --icon-svg-select-tertiary: {{ icon_select_svg_tertiary }};

    --modal-controls-preloader: {{ modal_controls_preloader }};

  }
</style>
